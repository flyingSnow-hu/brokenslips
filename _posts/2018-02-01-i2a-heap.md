---
layout: timemachine
title: 算法导论·最小堆
tags: introduction_to_algorithms heap
date: 2018-02-01
category: introduction_to_algorithms
---
# 算法导论·最小堆
python3 自带有 heapd 模块，不需要自己写堆
```python
#encoding:utf-8

class MinHeap():
	def __init__(self):
		self.__list = []

	def push(self,n):
		self.__list.append(n)
		self._swim()

	def pop(self):
		# if len(self.__: return None

		top = self.__list[0]
		self.__list[0] = self.__list[-1]
		self.__list.pop()
		self._sink()
		return top

	def is_empty(self):
		return len(self.__list) == 0

	def _swim(self):
		p = len(self.__list)-1
		while p > 0 and self.__list[p]<self.__list[int((p-1)/2)]:
			parent = int((p-1)/2)
			self.__list[p],self.__list[parent] = self.__list[parent],self.__list[p]
			p = parent

	def _sink(self):
		p = 0
		while p < len(self.__list):
			left = (p<<1)+1 if (p<<1)+1 < len(self.__list) else None
			right = left + 1 if left is not None and left < len(self.__list) - 1 else None

			left_key = self.__list[left] if left is not None else float('inf')
			right_key = self.__list[right] if right is not None else float('inf')
			p_key = self.__list[p]
			
			if left_key < p_key and left_key <= right_key:
				self.__list[left],self.__list[p] = self.__list[p],self.__list[left]
				p = left
			elif right_key < p_key and right_key <= left_key:
				self.__list[right],self.__list[p] = self.__list[p],self.__list[right]
				p = right
			else:
				break
			

if __name__ == '__main__':
	src = [7,7,5,9,8,6,3,4,2,1,9,8,3,2,5,2,5,2,]
	h = MinHeap()
	for n in src:
		h.push(n)

	print([h.pop() for i in range(0,len(src))])
	print(h.is_empty())
	
	


```